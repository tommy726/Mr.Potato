"use strict";(self["webpackChunkmrpotato"]=self["webpackChunkmrpotato"]||[]).push([[963],{1963:function(e,s,t){t.r(s),t.d(s,{default:function(){return v}});var a=t(3396),n=t(7139);const i={class:"container my-8 py-xxl-8"},r={class:"row justify-content-center"},o={class:"col-xxl-3 col-lg-4 col-sm-7 col"},l={class:"card"},d=(0,a._)("div",{class:"card-header text-center bg-warning"},[(0,a._)("h2",{class:"h3 mb-0"},"會員登入")],-1),u={class:"card-body p-5"},c=["for"],m=["type"],p={key:0,class:"text-danger fa-sm"},g=["disabled"],b={class:"card-footer text-muted text-end bg-warning"};function h(e,s,t,h,w,f){const k=(0,a.up)("Field"),v=(0,a.up)("Form"),x=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",r,[(0,a._)("div",o,[(0,a._)("div",l,[d,(0,a._)("div",u,[(0,a.Wm)(v,{onSubmit:f.signIn},{default:(0,a.w5)((({meta:e})=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(w.user,(({name:e,label:s,rules:t,type:i})=>((0,a.wg)(),(0,a.iD)("div",{key:e,class:"mb-3"},[(0,a._)("label",{for:e,class:"form-label w-100"},[(0,a.Uk)((0,n.zw)(s)+" ",1),(0,a.Wm)(k,{id:e,name:e,rules:t},{default:(0,a.w5)((({field:e,errorMessage:s,meta:t})=>[(0,a._)("input",(0,a.dG)(e,{type:i,class:["form-control",{"is-valid":t.valid,"is-invalid":s}]}),null,16,m),s&&t.touched?((0,a.wg)(),(0,a.iD)("span",p,(0,n.zw)(s),1)):(0,a.kq)("",!0)])),_:2},1032,["id","name","rules"])],8,c)])))),128)),(0,a._)("button",{disabled:!e.valid,type:"submit",class:"btn w-100 btn-primary text-white mt-3 mt-md-5"}," Submit ",8,g)])),_:1},8,["onSubmit"])]),(0,a._)("div",b,[(0,a.Wm)(x,{to:"/signup"},{default:(0,a.w5)((()=>[(0,a.Uk)("還沒有帳號？")])),_:1})])])])])])}t(7658);var w={name:"LoginPage",data(){return{user:[{label:"信箱",name:"username",as:"input",rules:"required|email"},{label:"密碼",name:"password",as:"input",type:"password",rules:"required"}]}},methods:{signIn(e){const s=this,t="https://vue-course-api.hexschool.io/admin/signin";s.$http.post(t,e).then((e=>{e.data.success?(s.setTokenCookie(e.data.token,e.data.expired),s.$router.push("/admin/products")):s.$store.dispatch("alertModules/updateMessage",{message:e.data.message,status:e.data.success})})).catch((()=>{s.$store.dispatch("alertModules/updateMessage",{message:"資料取得失敗，請確認api是否正確",status:!1})}))},setTokenCookie(e,s){document.cookie=`hexToken=${e};expires=${new Date(s)};`}}},f=t(89);const k=(0,f.Z)(w,[["render",h]]);var v=k}}]);
//# sourceMappingURL=963.8fbcd6ea.js.map