{"version":3,"file":"js/416.b318d14c.js","mappings":"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","sources":["webpack://mrpotato/./src/views/customer/orderPage/CheckCart.vue","webpack://mrpotato/./src/views/customer/orderPage/CheckCart.vue?b651"],"sourcesContent":["<template>\n  <div class=\"card\">\n    <div class=\"card-header text-center bg-warning\">\n      <h5 class=\"card-title my-2\">確認購物車</h5>\n    </div>\n    <div class=\"card-body d-flex flex-column\">\n      <div class=\"table-responsive\">\n        <table class=\"table align-middle text-nowrap\">\n          <thead>\n            <tr>\n              <th colspan=\"2\" scope=\"col\">商品名稱</th>\n              <th scope=\"col\" class=\"text-end\">單價</th>\n              <th scope=\"col\" class=\"text-center\" width=\"100\">數量</th>\n              <th scope=\"col\" class=\"text-end\">總價</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"item in cart.carts\" :key=\"item.id\">\n              <td scope=\"row\">\n                <a @click.prevent=\"removeCart(item.id)\" href=\"#\" aria-label=\"remove\"\n                  ><i class=\"fa-solid fa-trash-can\"></i\n                ></a>\n                <img :src=\"item.product.imageUrl\" :alt=\"item.product.title\" class=\"checkouts-img\" />\n              </td>\n              <td class=\"text-start\">{{ item.product.title }}</td>\n              <td class=\"text-end\">{{ $filters.currency(item.product.price) }}</td>\n              <td class=\"text-center\">\n                <div class=\"input-group\" role=\"group\" aria-label=\"quantity input\">\n                  <input\n                    v-model=\"item.qty\"\n                    type=\"number\"\n                    class=\"form-control form-control-sm text-center\"\n                    min=\"1\"\n                    aria-label=\"quantity\"\n                    aria-describedby=\"quantity\"\n                    @change =\"debounce(() => updateCart(item.product.id, item.qty, item.id))\"\n                  />\n                </div>\n              </td>\n              <td class=\"text-end\">{{ $filters.currency(item.qty * item.product.price) }}</td>\n            </tr>\n          </tbody>\n          <tfoot>\n            <tr>\n              <th colspan=\"4\" scope=\"row\" class=\"text-end\">\n                <label for=\"coupon\" class=\"d-flex w-75 align-items-center ms-auto\"\n                  >優惠券：\n                  <input\n                    v-model=\"coupon_code\"\n                    type=\"text\"\n                    class=\"form-control form-control-sm text-center\"\n                    id=\"coupon\"\n                    placeholder=\"請輸入優惠碼\"\n                    :class=\"{ 'border-success': couponData.status }\"\n                  />\n                </label>\n              </th>\n              <td class=\"text-end\">\n                <button @click=\"addCouponCode\" type=\"button\" class=\"btn btn-outline-secondary\">\n                  套用\n                </button>\n              </td>\n            </tr>\n            <tr>\n              <td scope=\"row\" colspan=\"3\" class=\"text-end\">共有 {{ totalQuantity }} 樣商品</td>\n              <td class=\"text-end fw-bold\">總計</td>\n              <td class=\"text-end fw-bold\">\n                <del v-if=\"couponData.status\">{{ $filters.currency(cart.total) }}</del>\n                <span v-else>{{ $filters.currency(cart.total) }}</span>\n              </td>\n            </tr>\n            <tr class=\"text-danger\" v-if=\"couponData.status\">\n              <td colspan=\"4\" scope=\"row\" class=\"text-end fw-bold\">折扣後</td>\n              <td class=\"text-end fw-bold\">{{ $filters.currency(cart.final_total) }}</td>\n            </tr>\n          </tfoot>\n        </table>\n      </div>\n      <router-link to=\"/customer_info\" class=\"btn btn-outline-primary ms-auto white-text-btn\">\n        前往結帳資訊\n      </router-link>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex';\n\nexport default {\n  name: 'CheckCart',\n  data() {\n    return {\n      coupon_code: localStorage.getItem('couponData')\n        ? JSON.parse(localStorage.getItem('couponData')).code\n        : '',\n      debounceTimer: null,\n    };\n  },\n  methods: {\n    ...mapActions('cartsModules', ['getCart']),\n    removeCart(id) {\n      this.$store.dispatch('cartsModules/removeCart', id);\n    },\n    debounce(func, delay = 500) {\n      clearTimeout(this.debounceTimer);\n      this.debounceTimer = setTimeout(func, delay);\n    },\n    updateCart(id, qty, cartId) {\n      const vm = this;\n      vm.$store.dispatch('cartsModules/updateCart', { id, qty, cartId });\n      if (vm.coupon_code !== '') {\n        setTimeout(() => vm.addCouponCode(), 300);\n      }\n    },\n    addCouponCode() {\n      const vm = this;\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/coupon`;\n      const coupon = {\n        code: vm.coupon_code,\n      };\n      vm.$http\n        .post(api, { data: coupon })\n        .then((response) => {\n          if (response.data.success) {\n            const status = response.data.success;\n            const code = response.data.message.split(':')[1];\n            vm.$store.dispatch('cartsModules/changeCouponStatus', { status, code });\n          } else {\n            vm.coupon_code = '';\n          }\n          vm.$store.dispatch('alertModules/updateMessage', {\n            message: response.data.message,\n            status: response.data.success,\n          });\n          vm.getCart();\n        })\n        .catch(() => {\n          vm.$store.dispatch('alertModules/updateMessage', {\n            message: '資料取得失敗，請確認api是否正確',\n            status: false,\n          });\n        });\n    },\n  },\n  computed: {\n    ...mapGetters('cartsModules', ['cart']),\n    ...mapGetters('cartsModules', ['couponData']),\n    totalQuantity() {\n      return this.cart.carts.map((item) => item.qty).reduce((total, qty) => total + qty, 0);\n    },\n  },\n  created() {\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./CheckCart.vue?vue&type=template&id=6533c0d4\"\nimport script from \"./CheckCart.vue?vue&type=script&lang=js\"\nexport * from \"./CheckCart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Tommy\\\\Desktop\\\\作品集\\\\mrpotato\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","colspan","scope","width","_hoisted_9","role","for","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_Fragment","_renderList","_ctx","cart","carts","item","key","id","_hoisted_7","onClick","_withModifiers","$event","$options","removeCart","href","src","product","imageUrl","alt","title","_hoisted_12","_toDisplayString","_hoisted_13","$filters","currency","price","_hoisted_14","_hoisted_15","qty","type","min","onChange","debounce","updateCart","_hoisted_17","_hoisted_18","_hoisted_19","$data","coupon_code","_normalizeClass","couponData","status","placeholder","_hoisted_20","_cache","args","addCouponCode","_hoisted_21","totalQuantity","_hoisted_22","_hoisted_23","_hoisted_24","total","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","final_total","_createVNode","_component_router_link","to","name","data","localStorage","getItem","JSON","parse","code","debounceTimer","methods","mapActions","this","$store","dispatch","func","delay","clearTimeout","setTimeout","cartId","vm","api","coupon","$http","post","then","response","success","message","split","getCart","catch","computed","mapGetters","map","reduce","created","__exports__","render"],"sourceRoot":""}