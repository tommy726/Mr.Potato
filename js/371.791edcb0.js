"use strict";(self["webpackChunkmrpotato"]=self["webpackChunkmrpotato"]||[]).push([[371],{7676:function(a,t,e){e.d(t,{Z:function(){return w}});var s=e(3396),l=e(7139),n=e(9242);const i={class:"d-flex justify-content-center mt-md-5 mt-3"},o={"aria-label":"Page navigation"},d={class:"pagination"},r=(0,s._)("span",{"aria-hidden":"true"},"«",-1),c=[r],u=["onClick"],p=(0,s._)("span",{"aria-hidden":"true"},"»",-1),_=[p];function h(a,t,e,r,p,h){return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("nav",o,[(0,s._)("ul",d,[(0,s._)("li",{class:(0,l.C_)([{disabled:!e.paginationData.has_pre},"page-item"])},[(0,s._)("a",{onClick:t[0]||(t[0]=(0,n.iM)((a=>h.updatedPagination(e.paginationData.current_page-1)),["prevent"])),class:"page-link",href:"#","aria-label":"Previous"},c)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.paginationData.total_pages,(a=>((0,s.wg)(),(0,s.iD)("li",{key:a,class:(0,l.C_)([{active:e.paginationData.current_page===a},"page-item"])},[(0,s._)("a",{onClick:(0,n.iM)((t=>h.updatedPagination(a)),["prevent"]),class:"page-link",href:"#"},(0,l.zw)(a),9,u)],2)))),128)),(0,s._)("li",{class:(0,l.C_)([{disabled:!e.paginationData.has_next},"page-item"])},[(0,s._)("a",{onClick:t[1]||(t[1]=(0,n.iM)((a=>h.updatedPagination(e.paginationData.current_page+1)),["prevent"])),class:"page-link",href:"#","aria-label":"Next"},_)],2)])])])}var g={name:"DashboardPagination",props:["paginationData"],methods:{updatedPagination(a){this.$emit("getPagination",a)}}},m=e(89);const f=(0,m.Z)(g,[["render",h]]);var w=f},8371:function(a,t,e){e.r(t),e.d(t,{default:function(){return J}});var s=e(3396),l=e(9242),n=e(7139);const i={class:"table-responsive"},o={class:"d-md-flex justify-content-between align-items-center"},d=(0,s._)("h2",null,[(0,s._)("i",{class:"fa-solid fa-list-check me-1"}),(0,s.Uk)("訂單列表")],-1),r={class:"d-flex"},c={class:"form-check"},u={class:"form-check-label",for:"all"},p={class:"form-check ms-3"},_={class:"form-check-label",for:"unpaid"},h={class:"form-check ms-3"},g={class:"form-check-label",for:"paid"},m={class:"table mt-4 text-nowrap"},f=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"購買時間"),(0,s._)("th",null,"顧客姓名"),(0,s._)("th",null,"Email"),(0,s._)("th",null,"訂購項目"),(0,s._)("th",null,"應付金額"),(0,s._)("th",null,"付款方式"),(0,s._)("th",{colspan:"2"},"是否付款")])],-1),w=["textContent"],b={class:"list-unstyled"},k={class:"text-center"},v={key:0,class:"text-success"},y={key:1,class:"text-danger"},x=["onClick"],D={class:"modal fade",id:"infoModal",tabindex:"-1","aria-labelledby":"infoModalLabel","aria-hidden":"true",ref:"infoModal"},P={class:"modal-dialog"},M={class:"modal-content"},z=(0,s._)("div",{class:"modal-header bg-info text-white text-center"},[(0,s._)("h1",{class:"modal-title fs-5 ms-auto",id:"infoModalLabel"},"顧客資訊"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),C={class:"modal-body px-4"},$={class:"table-responsive"},I={class:"table align-middle text-nowrap"},U=(0,s._)("th",{scope:"row",class:"text-center",width:"50%"},"姓名",-1),L=(0,s._)("th",{scope:"row",class:"text-center"},"聯絡電話",-1),G=(0,s._)("th",{scope:"row",class:"text-center"},"聯絡信箱",-1),O=(0,s._)("th",{scope:"row",class:"text-center"},"送餐地址",-1),Z=(0,s._)("th",{scope:"row",class:"text-center"},"社區大樓",-1),H=(0,s._)("th",{scope:"row",class:"text-center"},"結帳方式",-1),K=(0,s._)("th",{scope:"row",class:"text-center"},"特殊備註",-1),V=(0,s._)("th",{scope:"row",class:"text-center"},"是否付款",-1),Y={key:0,class:"text-success"},j={key:1,class:"text-danger"},q=(0,s._)("button",{type:"button",class:"btn btn-outline-secondary d-block ms-auto","data-bs-dismiss":"modal"}," 關閉 ",-1);function A(a,t,e,A,E,N){const W=(0,s.up)("DashboardPagination");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",o,[d,(0,s._)("div",r,[(0,s._)("div",c,[(0,s._)("label",u,[(0,s.Uk)(" 所有訂單 "),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>E.isPaid=a),value:"all",class:"form-check-input",type:"radio",name:"is_paid",id:"all"},null,512),[[l.G2,E.isPaid]])])]),(0,s._)("div",p,[(0,s._)("label",_,[(0,s.Uk)(" 未付款 "),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>E.isPaid=a),value:"false",class:"form-check-input",type:"radio",name:"is_paid",id:"unpaid"},null,512),[[l.G2,E.isPaid]])])]),(0,s._)("div",h,[(0,s._)("label",g,[(0,s.Uk)(" 已付款 "),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>E.isPaid=a),value:"true",class:"form-check-input",type:"radio",name:"is_paid",id:"paid"},null,512),[[l.G2,E.isPaid]])])])])]),(0,s._)("table",m,[f,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(N.filterData,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:(0,n.C_)({"text-secondary":!t.is_paid})},[(0,s._)("td",null,(0,n.zw)(a.$filters.date(t.create_at)),1),(0,s._)("td",null,(0,n.zw)(t.user.name),1),(0,s._)("td",null,[t.user?((0,s.wg)(),(0,s.iD)("span",{key:0,textContent:(0,n.zw)(t.user.email)},null,8,w)):(0,s.kq)("",!0)]),(0,s._)("td",null,[(0,s._)("ul",b,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.products,((a,t)=>((0,s.wg)(),(0,s.iD)("li",{key:t},(0,n.zw)(a.product.title)+" : "+(0,n.zw)(a.qty)+(0,n.zw)(a.product.unit),1)))),128))])]),(0,s._)("td",k,(0,n.zw)(a.$filters.currency(t.total)),1),(0,s._)("td",null,(0,n.zw)(t.user.payment),1),(0,s._)("td",null,[t.is_paid?((0,s.wg)(),(0,s.iD)("strong",v,"已付款")):((0,s.wg)(),(0,s.iD)("span",y,"未付款"))]),(0,s._)("td",null,[(0,s._)("button",{onClick:a=>N.openModal(t.id),type:"button",class:"btn btn-info text-white"}," 顧客資訊 ",8,x)])],2)))),128))])]),(0,s._)("div",D,[(0,s._)("div",P,[(0,s._)("div",M,[z,(0,s._)("div",C,[(0,s._)("div",$,[(0,s._)("table",I,[(0,s._)("tbody",null,[(0,s._)("tr",null,[U,(0,s._)("td",null,(0,n.zw)(E.userInfo.user.name),1)]),(0,s._)("tr",null,[L,(0,s._)("td",null,(0,n.zw)(E.userInfo.user.tel),1)]),(0,s._)("tr",null,[G,(0,s._)("td",null,(0,n.zw)(E.userInfo.user.email),1)]),(0,s._)("tr",null,[O,(0,s._)("td",null,(0,n.zw)(E.userInfo.user.address),1)]),(0,s._)("tr",null,[Z,(0,s._)("td",null,(0,n.zw)(E.userInfo.user.community),1)]),(0,s._)("tr",null,[H,(0,s._)("td",null,(0,n.zw)(E.userInfo.user.payment),1)]),(0,s._)("tr",null,[K,(0,s._)("td",null,(0,n.zw)(E.userInfo.message),1)]),(0,s._)("tr",null,[V,E.userInfo.is_paid?((0,s.wg)(),(0,s.iD)("td",Y,"已付款")):((0,s.wg)(),(0,s.iD)("td",j,"未付款"))])])])]),q])])])],512),(0,s.Wm)(W,{"pagination-data":E.pagination,onGetPagination:N.getOrder},null,8,["pagination-data","onGetPagination"])])}var E=e(2166),N=e(7676),W={name:"AdminOrders",components:{DashboardPagination:N.Z},data(){return{orderData:{orders:{}},userInfo:{user:{}},pagination:{},isPaid:"all"}},methods:{getOrder(a=1){const t=this,e=`https://vue-course-api.hexschool.io/api/tommy726/admin/orders?page=${a}`;t.$store.dispatch("updateLoading",!0),t.$http.get(e).then((a=>{t.orderData=a.data,t.pagination=a.data.pagination,t.$store.dispatch("updateLoading",!1)})).catch((()=>{t.$store.dispatch("alertModules/updateMessage",{message:"資料取得失敗，請確認api是否正確",status:!1})}))},openModal(a){const t=this,e=`https://vue-course-api.hexschool.io/api/tommy726/order/${a}`;t.infoModal.show(),t.$store.dispatch("updateLoading",!0),t.$http.get(e).then((a=>{a.data.order?t.userInfo=a.data.order:t.infoModal.hide(),t.$store.dispatch("updateLoading",!1)})).catch((()=>{t.$store.dispatch("alertModules/updateMessage",{message:"資料取得失敗，請確認api是否正確",status:!1})}))}},created(){this.getOrder()},computed:{filterData(){const a=this;let t={};return"all"===a.isPaid?t=a.orderData.orders:"true"===a.isPaid?t=a.orderData.orders.filter((a=>!0===a.is_paid)):"false"===a.isPaid&&(t=a.orderData.orders.filter((a=>!1===a.is_paid))),t}},mounted(){const a=this;a.infoModal=new E.u_(a.$refs.infoModal)}},B=e(89);const F=(0,B.Z)(W,[["render",A]]);var J=F}}]);
//# sourceMappingURL=371.791edcb0.js.map