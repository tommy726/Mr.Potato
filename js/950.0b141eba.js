"use strict";(self["webpackChunkmrpotato"]=self["webpackChunkmrpotato"]||[]).push([[950],{950:function(e,t,a){a.r(t),a.d(t,{default:function(){return V}});var s=a(3396),l=a(7139);const r=["aria-expanded"],d={class:"collapse mb-3",id:"collapseExample"},c={class:"card card-body"},o={class:"table-responsive"},n={class:"table align-middle text-nowrap"},i=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{colspan:"2",scope:"col"},"商品名稱"),(0,s._)("th",{scope:"col",class:"text-end"},"單價"),(0,s._)("th",{scope:"col",class:"text-end",width:"100"},"數量"),(0,s._)("th",{scope:"col",class:"text-end"},"總價")])],-1),u={scope:"row"},m=["src","alt"],p={class:"text-end"},_={class:"text-end"},b={class:"text-end"},y={key:0},w=(0,s._)("th",{scope:"row",class:"text-end"},[(0,s._)("div",{class:"me-3"},"優惠券：")],-1),f={colspan:"3"},g={class:"form-control form-control-sm text-center border-success"},h=(0,s._)("td",{class:"text-end"},[(0,s._)("div",{class:"btn btn-success disabled"},"已套用優惠")],-1),v={class:"fw-bold text-end"},x={scope:"row",colspan:"3"},k=(0,s._)("td",null,"合計",-1),D={key:0},q={key:1},z={key:1,class:"text-danger text-end fw-bold"},$=(0,s._)("td",{scope:"row",colspan:"4"},"折扣後",-1),M={class:"col-md-6 mb-3"},U={class:"card h-100"},C=(0,s._)("div",{class:"card-header text-center bg-warning"},[(0,s._)("h5",{class:"card-title my-2"},"顧客資訊")],-1),E={class:"card-body p-4"},W=["for"],G=["type"],I={key:0,class:"text-danger fa-sm"},S={for:"message",class:"form-label w-100"},H={class:"col-md-6 mb-3"},K={class:"card h-100"},Y=(0,s._)("div",{class:"card-header text-center bg-warning"},[(0,s._)("h5",{class:"card-title my-2"},"外送資訊")],-1),A={class:"card-body p-4"},F=["for"],Q=["type"],T={for:"community",class:"form-label w-100"},Z={class:"form-check-label mb-3"},j={class:"mt-2"},B={class:"text-end"},J=["disabled"];function L(e,t,a,L,N,O){const P=(0,s.up)("Field"),R=(0,s.up)("router-link"),V=(0,s.up)("Form");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("button",{class:"btn btn-outline-potatoText w-100 mb-3",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseExample","aria-controls":"collapseExample","aria-expanded":N.isExpanded,onClick:t[0]||(t[0]=e=>N.isExpanded=!N.isExpanded)},(0,l.zw)(N.isExpanded?"隱藏訂單資訊":"顯示訂單資訊"),9,r),(0,s._)("div",d,[(0,s._)("div",c,[(0,s._)("div",o,[(0,s._)("table",n,[i,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.cart.carts,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id},[(0,s._)("td",u,[(0,s._)("img",{src:t.product.imageUrl,alt:t.product.title,class:"checkouts-img"},null,8,m)]),(0,s._)("td",null,(0,l.zw)(t.product.title),1),(0,s._)("td",p,(0,l.zw)(e.$filters.currency(t.product.price)),1),(0,s._)("td",_,(0,l.zw)(t.qty),1),(0,s._)("td",b,(0,l.zw)(e.$filters.currency(t.qty*t.product.price)),1)])))),128))]),(0,s._)("tfoot",null,[e.couponData.status?((0,s.wg)(),(0,s.iD)("tr",y,[w,(0,s._)("td",f,[(0,s._)("div",g,(0,l.zw)(e.couponData.code),1)]),h])):(0,s.kq)("",!0),(0,s._)("tr",v,[(0,s._)("td",x,"共有 "+(0,l.zw)(O.totalQuantity)+" 樣商品",1),k,(0,s._)("td",null,[e.couponData.status?((0,s.wg)(),(0,s.iD)("del",D,(0,l.zw)(e.$filters.currency(e.cart.total)),1)):((0,s.wg)(),(0,s.iD)("span",q,(0,l.zw)(e.$filters.currency(e.cart.total)),1))])]),e.couponData.status?((0,s.wg)(),(0,s.iD)("tr",z,[$,(0,s._)("td",null,(0,l.zw)(e.$filters.currency(e.cart.final_total)),1)])):(0,s.kq)("",!0)])])])])]),(0,s.Wm)(V,{onSubmit:O.order,class:"row g-3"},{default:(0,s.w5)((({meta:e})=>[(0,s._)("div",M,[(0,s._)("div",U,[C,(0,s._)("div",E,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(N.userInfo,(({name:e,label:t,rules:a,type:r})=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"mb-3"},[(0,s._)("label",{for:e,class:"form-label w-100"},[(0,s.Uk)((0,l.zw)(t)+" ",1),(0,s.Wm)(P,{id:e,name:e,rules:a},{default:(0,s.w5)((({field:e,errorMessage:t,meta:a})=>[(0,s._)("input",(0,s.dG)(e,{type:r,class:["form-control",{"is-valid":a.valid,"is-invalid":t}]}),null,16,G),t&&a.touched?((0,s.wg)(),(0,s.iD)("span",I,(0,l.zw)(t),1)):(0,s.kq)("",!0)])),_:2},1032,["id","name","rules"])],8,W)])))),128)),(0,s._)("label",S,[(0,s.Uk)("留言 "),(0,s.Wm)(P,{id:"message",name:"message"},{default:(0,s.w5)((({field:e})=>[(0,s._)("input",(0,s.dG)(e,{type:"text",class:"form-control"}),null,16)])),_:1})])])])]),(0,s._)("div",H,[(0,s._)("div",K,[Y,(0,s._)("div",A,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(N.detailAddress,(({name:e,label:t,rules:a,type:r})=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"mb-3"},[(0,s._)("label",{for:e,class:"form-label w-100"},[(0,s.Uk)((0,l.zw)(t)+" ",1),(0,s.Wm)(P,{id:e,name:e,rules:a},{default:(0,s.w5)((({field:e,errorMessage:t,meta:a})=>[(0,s._)("input",(0,s.dG)(e,{type:r,class:["form-control",{"is-valid":a.valid,"is-invalid":t}]}),null,16,Q)])),_:2},1032,["id","name","rules"])],8,F)])))),128)),(0,s._)("label",T,[(0,s.Uk)("大樓 / 社區名稱 "),(0,s.Wm)(P,{id:"community",name:"community"},{default:(0,s.w5)((({field:e})=>[(0,s._)("input",(0,s.dG)(e,{type:"text",class:"form-control"}),null,16)])),_:1})]),(0,s._)("div",Z,[(0,s.Uk)(" *付款方式 "),(0,s._)("div",j,[(0,s.Wm)(P,{name:"payment",type:"radio",value:"現金",rules:"required",class:"form-check-input ms-3"}),(0,s.Uk)(" 現金 "),(0,s.Wm)(P,{name:"payment",type:"radio",value:"信用卡",rules:"required",class:"form-check-input ms-3"}),(0,s.Uk)(" 信用卡 ")])])])])]),(0,s._)("div",B,[(0,s.Wm)(R,{to:"/check_cart",class:"btn btn-outline-secondary"},{default:(0,s.w5)((()=>[(0,s.Uk)("返回購物車")])),_:1}),(0,s._)("button",{disabled:!e.valid,class:(0,l.C_)([{"disabled-btn":!e.valid},"btn btn-outline-primary white-text-btn ms-2"]),type:"submit"}," 確認 ",10,J)])])),_:1},8,["onSubmit"])])}a(7658);var N=a(65),O={name:"CustomerInfo",data(){return{userInfo:[{label:"*姓名",name:"name",as:"input",rules:"required"},{label:"*信箱",name:"email",as:"input",rules:"required|email"},{label:"*電話",name:"tel",as:"input",type:"tel",rules:"required"}],detailAddress:[{label:"*縣 / 市區",name:"city",as:"input",rules:"required"},{label:"*地址",name:"address",as:"input",rules:"required"}],payment:"",isExpanded:!1}},methods:{...(0,N.nv)("cartsModules",["getCart"]),order(e){const t=this,a="https://vue-course-api.hexschool.io/api/tommy726/order",s={user:{name:e.name,email:e.email,tel:e.tel,payment:e.payment,address:`${e.city}${e.address}`,community:e.community},message:e.message};t.$http.post(a,{data:s}).then((e=>{if(t.$store.dispatch("alertModules/updateMessage",{message:e.data.message,status:e.data.success}),e.data.success){const a=e.data.orderId;t.getCart(),t.$router.push(`/checkouts/${a}`)}})).catch((()=>{t.$store.dispatch("alertModules/updateMessage",{message:"資料取得失敗，請確認api是否正確",status:!1})}))}},computed:{...(0,N.Se)("cartsModules",["cart"]),...(0,N.Se)("cartsModules",["couponData"]),totalQuantity(){return this.cart.carts.map((e=>e.qty)).reduce(((e,t)=>e+t),0)}},created(){this.getCart()}},P=a(89);const R=(0,P.Z)(O,[["render",L]]);var V=R}}]);
//# sourceMappingURL=950.0b141eba.js.map